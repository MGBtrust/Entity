(this["webpackJsonpdid-configuration"]=this["webpackJsonpdid-configuration"]||[]).push([[0],{101:function(n,e){},115:function(n,e){},184:function(n,e){},189:function(n,e){},190:function(n,e){},197:function(n,e){},200:function(n,e){},206:function(n,e){},211:function(n,e){},273:function(n,e){},293:function(n,e){},315:function(n,e){},372:function(n,e,t){n.exports=t(655)},377:function(n,e,t){},395:function(n,e){},405:function(n,e){},413:function(n,e){},414:function(n,e){},440:function(n,e){},441:function(n,e){},452:function(n,e){},467:function(n,e){},476:function(n,e){},477:function(n,e){},486:function(n,e){},494:function(n,e){},495:function(n,e){},513:function(n,e){},519:function(n,e){},521:function(n,e){},552:function(n,e){},553:function(n,e){},655:function(n,e,t){"use strict";t.r(e);var r=t(38),o=t.n(r),c=t(368),i=t.n(c),a=(t(377),t(8)),u=t(2),s=t(1),f=t.n(s),l=t(22),d=t(369),p=t.n(d),h=t(370),v=t.n(h),w=t(464),b=t(480),g=t(656),m=b.suites.Ed25519Signature2018,k=function(){var n=Object(l.a)(f.a.mark((function n(e){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(e,{headers:{Accept:"application/ld+json"},method:"get"}).then((function(n){return n.json()})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x={resolve:function(){var n=Object(l.a)(f.a.mark((function n(e){var t;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k("https://uniresolver.io/1.0/identifiers/"+e);case 2:if(null!==(t=n.sent).didDocument){n.next=5;break}throw new Error("Could not resolve DID with Universal Resolver.");case 5:return n.abrupt("return",t.didDocument);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y={Ed25519Signature2018:new m},_=function(){var n=Object(l.a)(f.a.mark((function n(e){var t,r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.startsWith("did:")){n.next=5;break}return n.next=3,x.resolve(e);case 3:return t=n.sent,n.abrupt("return",{contextUrl:null,document:t,documentUrl:e});case 5:return n.prev=5,n.next=8,w.documentLoader(e);case 8:return r=n.sent,n.abrupt("return",r);case 12:n.prev=12,n.t0=n.catch(5),console.error("No remote context support for ".concat(e));case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}(),j=window.location.origin+"/.well-known/did-configuration.json",E=function(n,e){var t;return n.assertionMethod.forEach((function(r){"string"===typeof r&&r===e&&n.publicKey&&n.publicKey.forEach((function(n){n.id===e&&(t=n)})),r.id===e&&(t=r)})),t};var S=function(){var n=o.a.useState({well_known_did_configuration_uri:j}),e=Object(u.a)(n,2),t=e[0],r=e[1],c=function(){var n=Object(l.a)(f.a.mark((function n(e){var r,o,c,i,a,u,s,l,d,p,h,w,b,m,x;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.next=3,k(t.well_known_did_configuration_uri);case 3:o=n.sent,console.log({did_configuration_resource:o}),c=0;case 6:if(!(c<o.entries.length)){n.next=54;break}if(n.prev=7,console.log("processing entry ",c),i=o.entries[c],console.log({entry:i}),"string"!==typeof i){n.next=32;break}return n.next=14,g.JWS.decode(i,{complete:!0});case 14:return a=n.sent,u=a.header,s=a.payload,l=a.signature,console.log({header:u,payload:s,signature:l}),n.next=21,_(u.kid);case 21:if(d=n.sent,p=d.document,console.log(p),h=E(p,u.kid),console.log({key:h}),!h||"secp256k1"!==h.publicKeyJwk.crv){n.next=32;break}return n.next=29,g.JWT.verify(i,h.publicKeyJwk);case 29:w=n.sent,w.vc.credentialSubject.domain===new URL(e).host&&r.push(w.vc.credentialSubject.id);case 32:if("object"!==typeof i){n.next=46;break}if(b=y[i.proof.type]){n.next=37;break}return console.warn("no suite for ",i.proof.type),n.abrupt("continue",51);case 37:return n.next=39,v.a.verifyCredential({credential:i,suite:b,documentLoader:_});case 39:if((m=n.sent).verified){n.next=42;break}return n.abrupt("continue",51);case 42:console.log({verification_result:m}),x=i.credentialSubject.domain===new URL(e).host,console.log({domain_matches_resource_uri:x}),x&&r.push(i.credentialSubject.id);case 46:n.next=51;break;case 48:n.prev=48,n.t0=n.catch(7),console.error(n.t0);case 51:c++,n.next=6;break;case 54:return n.abrupt("return",r);case 55:case"end":return n.stop()}}),n,null,[[7,48]])})));return function(e){return n.apply(this,arguments)}}();return o.a.useEffect((function(){Object(l.a)(f.a.mark((function n(){var e;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(t.well_known_did_configuration_uri);case 2:e=n.sent,r(Object(a.a)({},t,{linked_dids:e}));case 4:case"end":return n.stop()}}),n)})))()}),[]),o.a.createElement("div",{style:{padding:"16px"}},o.a.createElement(p.a,{bannerColor:"#594aa8",href:"https://github.com/decentralized-identity/.well-known"}),o.a.createElement("p",null,"See Developer console for processing details."),o.a.createElement("pre",null,JSON.stringify(t,null,2)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[372,1,2]]]);
//# sourceMappingURL=main.55ac3fce.chunk.js.map