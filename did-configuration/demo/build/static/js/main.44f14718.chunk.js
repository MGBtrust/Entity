(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(t,e){},160:function(t,e){},161:function(t,e){},165:function(t,e){},177:function(t,e){},182:function(t,e){},226:function(t,e){},276:function(t,e){},335:function(t,e,n){t.exports=n(598)},340:function(t,e,n){},361:function(t,e){},362:function(t,e){},376:function(t,e){},378:function(t,e){},386:function(t,e){},398:function(t,e){},406:function(t,e){},407:function(t,e){},410:function(t){t.exports={"@context":[{"@version":1.1,didcfg:"https://identity.foundation/.well-known/contexts/did-configuration-v0.0#",domainLinkageAssertion:"didcfg:domainLinkageAssertion",domain:"didcfg:domain",entries:"didcfg:entries",did:"didcfg:did",vc:"didcfg:vc"}]}},415:function(t,e){},424:function(t,e){},425:function(t,e){},444:function(t,e){},452:function(t,e){},454:function(t,e){},486:function(t,e){},487:function(t,e){},598:function(t,e,n){"use strict";n.r(e);var r=n(30),a=n.n(r),i=n(327),o=n.n(i),c=(n(340),n(95)),u=n(43),s=n(328),d=n(329),f=n(333),l=n(330),p=n(334),h=n(0),v=n.n(h),m=n(11),b=n(331),w=n.n(b),y=["assertionMethod","authentication","capabilityDelegation","capabilityInvocation"],x=["publicKey","keyAgreement"],k=function(t){var e=JSON.parse(JSON.stringify(Object(u.a)({},t)));return x.forEach(function(t){e[t]&&e[t].forEach(function(t){"#"===t.id[0]&&(t.id=e.id+t.id),t.controller||(t.controller=e.id)})}),y.forEach(function(t){e[t]&&(e[t]=e[t].map(function(t){return"#"===t[0]?e.id+t:t}))}),e},g=n(342).driver(),j=function(){var t=Object(m.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w()(e,{headers:{Accept:"application/ld+json"},method:"get"}).then(function(t){return t.json()}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),O=function(t){var e=t.id&&0===t.id.indexOf("did:")?t:Object(u.a)({},t.didDocument);return t.methodMetadata&&(t.methodMetadata.continuation.publicKey&&(e.publicKey=t.methodMetadata.continuation.publicKey),t.methodMetadata.continuation.assertionMethod&&(e.assertionMethod=t.methodMetadata.continuation.assertionMethod),t.methodMetadata.continuation.authentication&&(e.authentication=t.methodMetadata.continuation.authentication),t.methodMetadata.continuation.capabilityInvocation&&(e.capabilityInvocation=t.methodMetadata.continuation.capabilityInvocation),t.methodMetadata.continuation.capabilityDelegation&&(e.capabilityDelegation=t.methodMetadata.continuation.capabilityDelegation),t.methodMetadata.continuation.keyAgreement&&(e.keyAgreement=t.methodMetadata.continuation.keyAgreement)),e},E={resolve:function(){var t=Object(m.a)(v.a.mark(function t(e){var n,r,a,i,o;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=e.split(":").splice(0,2).join(":"),t.t0=n,t.next="did:key"===t.t0?5:"did:elem"===t.t0?9:13;break;case 5:return t.next=7,g.get({did:e});case 7:return r=t.sent,t.abrupt("break",16);case 9:return t.next=11,j("https://element-did.com/api/v1/sidetree/"+e);case 11:return r=t.sent,t.abrupt("break",16);case 13:return t.next=15,j("https://uniresolver.io/1.0/identifiers/"+e);case 15:r=t.sent;case 16:if(null!==r.didDocument){t.next=18;break}throw new Error("Could not resolve DID with Universal Resolver.");case 18:return t.next=20,O(r);case 20:return a=t.sent,i=k(a),o=i,t.abrupt("return",o);case 26:throw t.prev=26,t.t1=t.catch(0),new Error(t.t1);case 29:case"end":return t.stop()}},t,null,[[0,26]])}));return function(e){return t.apply(this,arguments)}}()},M=n(87),K={"https://identity.foundation/.well-known/contexts/did-configuration-v0.0.jsonld":n(410)},A=function(){var t=Object(m.a)(v.a.mark(function t(e){var n,r,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.startsWith("did:")){t.next=5;break}return t.next=3,E.resolve(e);case 3:return n=t.sent,t.abrupt("return",{contextUrl:null,document:n,documentUrl:e});case 5:if(!(r=K[e])){t.next=8;break}return t.abrupt("return",{contextUrl:null,document:r,documentUrl:e});case 8:return t.prev=8,t.next=11,M.documentLoader(e);case 11:return a=t.sent,t.abrupt("return",a);case 15:t.prev=15,t.t0=t.catch(8),console.error("No remote context support for ".concat(e));case 18:throw console.error("No custom context support for ".concat(e)),new Error("No custom context support for ".concat(e));case 20:case"end":return t.stop()}},t,null,[[8,15]])}));return function(e){return t.apply(this,arguments)}}(),J=n(411),S=n(173),U=n(83).Ed25519KeyPair,D=S.suites.Ed25519Signature2018,L=n(599),W={sub:"did:ethr:0xf1232f840f3ad7d23fcdaa84d6c66dac24efb198",iss:"did:ethr:0xf1232f840f3ad7d23fcdaa84d6c66dac24efb198",nbf:1562950282,exp:1475878357,vc:{"@context":["https://www.w3.org/2018/credentials/v1","https://identity.foundation/.well-known/contexts/did-configuration-v0.0.jsonld"],type:["VerifiableCredential","DomainLinkageAssertion"],credentialSubject:{domainLinkageAssertion:{domain:"identity.foundation"}}}},I=(W.vc.credentialSubject,function(){var t=Object(m.a)(v.a.mark(function t(e,n){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=!1,t.next=3,Promise.all(e.entries.map(function(){var t=Object(m.a)(v.a.mark(function t(e){var a,i,o,c,u,s,d,f;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.did!==n){t.next=21;break}if("string"!==typeof e.vc){t.next=11;break}return t.next=4,A(e.did);case 4:return a=t.sent.document,i=L.JWS.decode(e.vc,{complete:!0}),o=a.publicKey.find(function(t){return t.id===a.id+"#"+i.header.kid}),t.next=9,L.JWT.verify(e.vc,o.publicKeyJwk);case 9:c=t.sent,r=c.iss===a.id;case 11:if("object"!==typeof e.vc){t.next=21;break}return t.next=14,A(e.did);case 14:return u=t.sent.document,s=u.publicKey.find(function(t){return t.id===e.vc.proof.verificationMethod}),d=new D({key:new U(s)}),t.next=19,J.verify({credential:e.vc,suite:d,documentLoader:A});case 19:f=t.sent,r=f.verified;case 21:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),N=function(){var t=Object(m.a)(v.a.mark(function t(e,n){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.next=3,Promise.all(e.entries.map(function(){var t=Object(m.a)(v.a.mark(function t(e){var a,i,o,c,u,s;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.did!==n){t.next=21;break}if("string"!==typeof e.vc){t.next=11;break}return t.next=4,A(e.did);case 4:return a=t.sent.document,i=L.JWS.decode(e.vc,{complete:!0}),o=a.publicKey.find(function(t){return t.id===a.id+"#"+i.header.kid}),t.next=9,L.JWT.verify(e.vc,o.publicKeyJwk);case 9:t.sent.iss===a.id&&(r=i.payload.vc);case 11:if("object"!==typeof e.vc){t.next=21;break}return t.next=14,A(e.did);case 14:return c=t.sent.document,u=c.publicKey.find(function(t){return t.id===e.vc.proof.verificationMethod}),s=new D({key:new U(u)}),t.next=19,J.verify({credential:e.vc,suite:s,documentLoader:A});case 19:t.sent.verified&&(r=e.vc);case 21:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),C=function(){var t=Object(m.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e,{method:"get",headers:{Accept:"application/ld+json"}}).then(function(t){return t.json()}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),P=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(f.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(a)))).state={},n}return Object(p.a)(e,t),Object(d.a)(e,[{key:"componentWillMount",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e,n=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=Object(m.a)(v.a.mark(function t(e){var r,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URL(e),t.next=3,C(e);case 3:return a=t.sent,n.setState({wellKnownUri:e,config:a}),t.abrupt("return",Promise.all(a.entries.map(function(){var t=Object(m.a)(v.a.mark(function t(e){var i,o,s;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(a,e.did);case 2:if(!(i=t.sent)){t.next=11;break}return t.next=6,N(a,e.did);case 6:return o=t.sent,s=o.credentialSubject.domainLinkageAssertion.domain,console.log(e.did," is authorized for: ",s),n.setState({verified:Object(u.a)(Object(c.a)({},e.did,{verified:i,origin:r.hostname,is_claim_for_origin:r.hostname===s}),n.state.verified||{})}),t.abrupt("return",e.did);case 11:return t.abrupt("return",void 0);case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.next=3,e(window.location.origin+"/.well-known/did-configuration.json");case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,".well-known/did-configuration"),a.a.createElement("h2",null,"URI"),a.a.createElement("a",{href:this.state.wellKnownUri},this.state.wellKnownUri),a.a.createElement("br",null),a.a.createElement("h2",null,"Configuration"),a.a.createElement("pre",null,JSON.stringify(this.state.config,null,2)),a.a.createElement("br",null),a.a.createElement("h2",null,"Verified"),a.a.createElement("pre",null,JSON.stringify(this.state.verified,null,2)))}}]),e}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},85:function(t,e){},99:function(t,e){}},[[335,1,2]]]);
//# sourceMappingURL=main.44f14718.chunk.js.map